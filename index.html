<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IVECO CAPITAL Deal Book</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { background-color: #f8fafc; font-family: 'Segoe UI', sans-serif; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- ICONE ---
        const IconCheck = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>;
        const IconArrow = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>;
        const IconUser = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>;
        const IconTruck = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="16" x="4" y="4" rx="2"/><rect width="4" height="4" x="9" y="9" rx="1"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/></svg>;

        // --- APP PRINCIPALE ---
        const DealBookApp = () => {
            // Stati per gestire il flusso
            const [step, setStep] = React.useState(1);
            const [showLeadForm, setShowLeadForm] = React.useState(false);
            const [formSubmitted, setFormSubmitted] = React.useState(false);

            // Dati raccolti
            const [data, setData] = React.useState({
                vehicle: '',      // Light, Medium, Heavy
                role: '',         // Manager, OwnerDriver
                subRole: '',      // Small/Large Fleet oppure OwnerOnly/OwnerDriver
                goal: ''          // Ownership, Usage, Green
            });

            // Logica delle raccomandazioni
            const getRecommendation = () => {
                if (data.goal === 'green') return {
                    title: "GATE (Green & Advanced Transport Ecosystem)",
                    desc: "La soluzione pay-per-use dedicata alla transizione elettrica. Truck-as-a-Service completo.",
                    features: ["Modello Pay-per-use", "Ecosistema di servizi inclusi", "Zero rischi residui"]
                };
                if (data.goal === 'usage') return {
                    title: "Operating Lease & Full Service",
                    desc: "Massima flessibilità. Paghi per l'uso senza appesantire il bilancio. Ideale per TCO certo.",
                    features: ["Canone All-inclusive", "Manutenzione inclusa", "Nessun rischio rivendita"]
                };
                return {
                    title: "Leasing Finanziario / Vendita Rateale",
                    desc: "La strada classica verso la proprietà. Costruisci valore nel tuo veicolo IVECO.",
                    features: ["Proprietà finale", "Ammortamento fiscale", "Piani flessibili"]
                };
            };

            const handleSelect = (key, value) => {
                setData(prev => ({ ...prev, [key]: value }));
                setStep(prev => prev + 1);
            };

            const reset = () => {
                setStep(1);
                setShowLeadForm(false);
                setFormSubmitted(false);
                setData({ vehicle: '', role: '', subRole: '', goal: '' });
            };

            // Componente Modale per Lead Generation
            const LeadModal = () => (
                <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 fade-in">
                    <div className="bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl relative">
                        <button onClick={() => setShowLeadForm(false)} className="absolute top-4 right-4 text-slate-400 hover:text-slate-600">✕</button>
                        
                        {!formSubmitted ? (
                            <>
                                <h3 className="text-2xl font-bold text-blue-900 mb-2">Request Quote</h3>
                                <p className="text-slate-600 mb-6 text-sm">Compila i dati per essere contattato da un esperto IVECO Capital.</p>
                                <form onSubmit={(e) => { e.preventDefault(); setFormSubmitted(true); }} className="space-y-4">
                                    <div className="grid grid-cols-2 gap-4">
                                        <input type="text" required placeholder="Nome" className="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" />
                                        <input type="text" required placeholder="Cognome" className="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" />
                                    </div>
                                    <input type="text" placeholder="Nome Azienda" className="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" />
                                    <input type="email" required placeholder="Email Aziendale" className="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" />
                                    <input type="tel" required placeholder="Telefono" className="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" />
                                    
                                    <button type="submit" className="w-full py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors shadow-lg mt-2">
                                        Invia Richiesta
                                    </button>
                                </form>
                            </>
                        ) : (
                            <div className="text-center py-8">
                                <div className="w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <IconCheck />
                                </div>
                                <h3 className="text-2xl font-bold text-slate-800 mb-2">Richiesta Inviata!</h3>
                                <p className="text-slate-600">Un nostro consulente ti contatterà a breve.</p>
                                <button onClick={reset} className="mt-6 text-blue-600 font-medium hover:underline">Torna all'inizio</button>
                            </div>
                        )}
                    </div>
                </div>
            );

            // --- RENDER DEI PASSI ---
            return (
                <div className="min-h-screen p-4 flex flex-col items-center justify-center font-sans text-slate-800">
                    
                    {/* Header */}
                    <header className="w-full max-w-2xl mb-8 text-center">
                        <h1 className="text-3xl font-bold text-blue-900 mb-1 tracking-tight">IVECO CAPITAL</h1>
                        <p className="text-blue-600 font-medium">Financial Solutions Configurator</p>
                        <div className="h-1 w-16 bg-blue-500 mx-auto mt-4 rounded-full"></div>
                    </header>

                    {/* Main Card */}
                    <div className="w-full max-w-2xl bg-white shadow-xl rounded-2xl overflow-hidden border border-slate-200 relative">
                        
                        {/* Progress Bar (4 Steps) */}
                        <div className="bg-slate-100 h-1.5 w-full">
                            <div className="h-full bg-blue-600 transition-all duration-500 ease-out" style={{ width: `${((step-1) / 4) * 100}%` }}></div>
                        </div>

                        <div className="p-6 md:p-10 min-h-[400px] flex flex-col justify-center">

                            {/* STEP 1: VEHICLE TYPE */}
                            {step === 1 && (
                                <div className="fade-in">
                                    <h2 className="text-2xl font-bold mb-6 text-center">Which vehicle are you looking to buy?</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                        {['Light', 'Medium', 'Heavy'].map(opt => (
                                            <button key={opt} onClick={() => handleSelect('vehicle', opt)} 
                                                className="p-4 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center font-semibold text-slate-700 hover:text-blue-800">
                                                {opt} Range
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* STEP 2: ROLE */}
                            {step === 2 && (
                                <div className="fade-in">
                                    <button onClick={() => setStep(1)} className="text-xs text-slate-400 mb-4 hover:text-blue-600">← Back</button>
                                    <h2 className="text-2xl font-bold mb-6 text-center">Are you a Fleet Manager or Owner/Driver?</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <button onClick={() => handleSelect('role', 'manager')} className="p-6 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all flex flex-col items-center gap-3">
                                            <IconUser /> <span className="font-bold text-lg">Fleet Manager</span>
                                        </button>
                                        <button onClick={() => handleSelect('role', 'owner')} className="p-6 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all flex flex-col items-center gap-3">
                                            <IconTruck /> <span className="font-bold text-lg">Owner / Driver</span>
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* STEP 3: SUB-ROLE (Dynamic) */}
                            {step === 3 && (
                                <div className="fade-in">
                                    <button onClick={() => setStep(2)} className="text-xs text-slate-400 mb-4 hover:text-blue-600">← Back</button>
                                    <h2 className="text-2xl font-bold mb-6 text-center">Tell us more about your business</h2>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        {data.role === 'manager' ? (
                                            <>
                                                <button onClick={() => handleSelect('subRole', 'small_fleet')} className="p-5 border border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-500 font-semibold">Small Fleet</button>
                                                <button onClick={() => handleSelect('subRole', 'large_fleet')} className="p-5 border border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-500 font-semibold">Large Fleet</button>
                                            </>
                                        ) : (
                                            <>
                                                <button onClick={() => handleSelect('subRole', 'owner_only')} className="p-5 border border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-500 font-semibold">Owner Only</button>
                                                <button onClick={() => handleSelect('subRole', 'owner_driver')} className="p-5 border border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-500 font-semibold">Owner & Driver</button>
                                            </>
                                        )}
                                    </div>
                                </div>
                            )}

                            {/* STEP 4: GOAL (Necessity) */}
                            {step === 4 && (
                                <div className="fade-in">
                                    <button onClick={() => setStep(3)} className="text-xs text-slate-400 mb-4 hover:text-blue-600">← Back</button>
                                    <h2 className="text-2xl font-bold mb-6 text-center">What is your primary goal?</h2>
                                    <div className="space-y-3">
                                        <button onClick={() => handleSelect('goal', 'ownership')} className="w-full p-4 border border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-500 flex justify-between items-center group transition-all">
                                            <div className="text-left">
                                                <div className="font-bold text-slate-800">Ownership</div>
                                                <div className="text-xs text-slate-500">I want to own the vehicle at the end.</div>
                                            </div>
                                            <IconArrow />
                                        </button>
                                        <button onClick={() => handleSelect('goal', 'usage')} className="w-full p-4 border border-slate-200 rounded-lg hover:bg-blue-50 hover:border-blue-500 flex justify-between items-center group transition-all">
                                            <div className="text-left">
                                                <div className="font-bold text-slate-800">Usage Flexibility</div>
                                                <div className="text-xs text-slate-500">I need predictable costs (Truck as a Service).</div>
                                            </div>
                                            <IconArrow />
                                        </button>
                                        <button onClick={() => handleSelect('goal', 'green')} className="w-full p-4 border border-green-100 rounded-lg hover:bg-green-50 hover:border-green-500 flex justify-between items-center group transition-all">
                                            <div className="text-left">
                                                <div className="font-bold text-slate-800">Green Transition</div>
                                                <div className="text-xs text-slate-500">eMobility & Pay-per-Use solutions.</div>
                                            </div>
                                            <IconArrow />
                                        </button>
                                    </div>
                                </div>
                            )}

                            {/* STEP 5: RESULT */}
                            {step === 5 && (
                                <div className="fade-in text-center">
                                    <div className="inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-bold mb-4 uppercase tracking-wide">Recommended Solution</div>
                                    <h3 className="text-3xl font-bold text-blue-900 mb-4">{getRecommendation().title}</h3>
                                    <p className="text-slate-600 mb-8 max-w-md mx-auto">{getRecommendation().desc}</p>
                                    
                                    <div className="bg-slate-50 rounded-xl p-6 text-left mb-8 border border-slate-100">
                                        <h4 className="font-bold text-slate-800 mb-3 text-sm uppercase">Key Benefits:</h4>
                                        <ul className="space-y-2">
                                            {getRecommendation().features.map((feat, i) => (
                                                <li key={i} className="flex items-center gap-2 text-slate-700 text-sm">
                                                    <div className="w-1.5 h-1.5 bg-blue-500 rounded-full"></div> {feat}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>

                                    <div className="flex flex-col gap-3">
                                        <button onClick={() => setShowLeadForm(true)} className="w-full py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200">
                                            Request Quote
                                        </button>
                                        <button onClick={reset} className="text-slate-400 hover:text-slate-600 text-sm py-2">Start Over</button>
                                    </div>
                                </div>
                            )}

                        </div>
                    </div>
                    
                    {showLeadForm && <LeadModal />}
                    <p className="mt-8 text-slate-400 text-xs">IVECO CAPITAL - Configurator v2.0</p>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DealBookApp />);
    </script>
</body>
</html>
